<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}HemoBank{% endblock %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
    *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
    html { font-size:15px; }
    body {
        font-family: 'DM Sans', -apple-system, sans-serif;
        background: #f4f5f7;
        color: #0f1117;
        display: flex;
        min-height: 100vh;
        line-height: 1.6;
    }

    /* ═══ SIDEBAR ═══ */
    .sidebar {
        width: 260px;
        background: linear-gradient(180deg, #b91c1c 0%, #7f1d1d 100%);
        position: fixed;
        top: 0; left: 0;
        height: 100vh;
        display: flex;
        flex-direction: column;
        z-index: 999;
        box-shadow: 4px 0 24px rgba(0,0,0,0.2);
    }
    .sidebar-header {
        padding: 24px 20px;
        border-bottom: 1px solid rgba(255,255,255,0.12);
        display: flex;
        align-items: center;
        gap: 13px;
    }
    .sidebar-logo-icon {
        width: 46px; height: 46px;
        background: white;
        border-radius: 13px;
        display: flex; align-items: center; justify-content: center;
        flex-shrink: 0;
        box-shadow: 0 4px 14px rgba(0,0,0,0.25);
    }
    .sidebar-logo-name {
        display: block;
        font-family: 'Playfair Display', serif;
        font-size: 1.15rem;
        color: white;
        font-weight: 700;
        line-height: 1.2;
    }
    .sidebar-logo-sub {
        display: block;
        font-size: 0.68rem;
        color: rgba(255,255,255,0.6);
        margin-top: 2px;
        letter-spacing: 0.03em;
    }
    .sidebar-nav {
        flex: 1;
        padding: 20px 12px;
        overflow-y: auto;
    }
    .nav-link {
        display: flex;
        align-items: center;
        gap: 13px;
        padding: 12px 14px;
        border-radius: 10px;
        color: rgba(255,255,255,0.72);
        text-decoration: none;
        font-size: 0.9rem;
        font-weight: 500;
        transition: all 0.18s ease;
        margin-bottom: 4px;
    }
    .nav-link:hover {
        background: rgba(255,255,255,0.13);
        color: white;
    }
    .nav-link.active {
        background: rgba(0,0,0,0.22);
        color: white;
        font-weight: 700;
        box-shadow: inset 3px 0 0 white;
    }
    .nav-icon {
        width: 38px; height: 38px;
        border-radius: 10px;
        background: rgba(255,255,255,0.12);
        display: flex; align-items: center; justify-content: center;
        flex-shrink: 0;
        transition: background 0.18s;
    }
    .nav-link:hover .nav-icon  { background: rgba(255,255,255,0.2); }
    .nav-link.active .nav-icon { background: rgba(255,255,255,0.25); }
    .sidebar-footer {
        padding: 18px 20px;
        border-top: 1px solid rgba(255,255,255,0.12);
    }
    .sidebar-footer-row {
        display: flex; align-items: center; gap: 10px; margin-bottom: 4px;
    }
    .status-dot {
        width: 9px; height: 9px; border-radius: 50%;
        background: #4ade80;
        box-shadow: 0 0 8px rgba(74,222,128,0.85);
        flex-shrink: 0;
    }
    .status-text { font-size: 0.8rem; color: rgba(255,255,255,0.65); font-weight: 500; }
    .sidebar-copy { font-size: 0.67rem; color: rgba(255,255,255,0.32); padding-left: 2px; margin-top: 4px; }

    /* ═══ MAIN ═══ */
    .main-wrap {
        margin-left: 260px;
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }

    /* ═══ TOPBAR ═══ */
    .topbar {
        background: white;
        border-bottom: 1px solid #e8eaed;
        padding: 18px 32px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky; top: 0; z-index: 100;
        box-shadow: 0 1px 6px rgba(0,0,0,0.06);
    }
    .topbar-title {
        font-family: 'Playfair Display', serif;
        font-size: 1.5rem; color: #0f1117; font-weight: 700; line-height: 1.2;
    }
    .topbar-sub { font-size: 0.8rem; color: #9ca3af; margin-top: 2px; }
    .topbar-right { display: flex; align-items: center; gap: 12px; }
    .topbar-date {
        display: flex; align-items: center; gap: 7px;
        font-size: 0.81rem; color: #6b7280;
        background: #f4f5f7; padding: 8px 14px;
        border-radius: 20px; border: 1px solid #e8eaed;
    }
    .topbar-hospital {
        font-size: 0.81rem; font-weight: 700;
        color: #b91c1c; background: #fef2f2;
        padding: 8px 16px; border-radius: 20px;
        border: 1px solid rgba(185,28,28,0.18);
    }

    /* ═══ PAGE BODY ═══ */
    .page-content { padding: 32px; flex: 1; }

    /* ═══ FLASH ═══ */
    .flash { padding:13px 18px; border-radius:10px; margin-bottom:20px; font-size:0.88rem; font-weight:500; }
    .flash-success { background:#dcfce7; color:#166534; border:1px solid #86efac; }
    .flash-error   { background:#fee2e2; color:#991b1b; border:1px solid #fca5a5; }

    /* ═══ FORM MESSAGE ═══ */
    .form-msg { display:none; margin:0 28px 20px; padding:13px 16px; border-radius:10px; font-size:0.87rem; font-weight:500; }
    .form-msg.success { background:#dcfce7; color:#166534; border:1px solid #86efac; display:block; }
    .form-msg.error   { background:#fee2e2; color:#991b1b; border:1px solid #fca5a5; display:block; }
    .form-msg.hidden  { display:none !important; }

    /* ═══ BUTTONS ═══ */
    .btn {
        display:inline-flex; align-items:center; gap:8px;
        padding:11px 22px; border-radius:10px;
        font-size:0.88rem; font-weight:700;
        font-family:'DM Sans',sans-serif; cursor:pointer;
        text-decoration:none; border:1.5px solid transparent; transition:all 0.18s;
    }
    .btn-primary { background:#b91c1c; color:white; border-color:#b91c1c; box-shadow:0 3px 12px rgba(185,28,28,0.28); }
    .btn-primary:hover { background:#991b1b; transform:translateY(-1px); box-shadow:0 6px 18px rgba(185,28,28,0.36); }
    .btn-ghost { background:transparent; color:#6b7280; border-color:#e8eaed; }
    .btn-ghost:hover { background:#f4f5f7; color:#0f1117; }
    .btn-sm { padding:7px 15px; font-size:0.8rem; }
    .btn-xs { padding:5px 11px; font-size:0.75rem; }

    /* ═══ DASHBOARD STATS ═══ */
    .stats-row { display:grid; grid-template-columns:repeat(4,1fr); gap:18px; margin-bottom:26px; }
    .stat-card {
        background:white; border-radius:14px; border:1px solid #e8eaed;
        padding:22px 20px; display:flex; align-items:center; gap:16px;
        box-shadow:0 1px 4px rgba(0,0,0,0.05); transition:all 0.2s;
        position:relative; overflow:hidden;
    }
    .stat-card::after { content:''; position:absolute; top:0;left:0;right:0; height:3px; }
    .sc-red::after   { background:linear-gradient(90deg,#b91c1c,#f87171); }
    .sc-blue::after  { background:linear-gradient(90deg,#1d6fa4,#60b4e8); }
    .sc-green::after { background:linear-gradient(90deg,#166534,#4ade80); }
    .sc-amber::after { background:linear-gradient(90deg,#92400e,#fbbf24); }
    .stat-card:hover { transform:translateY(-2px); box-shadow:0 8px 24px rgba(0,0,0,0.09); }
    .stat-ico { width:52px;height:52px; border-radius:13px; display:flex;align-items:center;justify-content:center; flex-shrink:0; }
    .sc-red   .stat-ico { background:#fef2f2; color:#b91c1c; }
    .sc-blue  .stat-ico { background:#eff6ff; color:#1d6fa4; }
    .sc-green .stat-ico { background:#f0fdf4; color:#166534; }
    .sc-amber .stat-ico { background:#fffbeb; color:#92400e; }
    .stat-val { display:block; font-family:'Playfair Display',serif; font-size:2rem; font-weight:700; color:#0f1117; line-height:1; }
    .stat-lbl { display:block; font-size:0.78rem; color:#9ca3af; margin-top:4px; }

    /* ═══ CONTENT GRID & PANELS ═══ */
    .content-grid { display:grid; grid-template-columns:1fr 340px; gap:22px; }
    .panel { background:white; border-radius:14px; border:1px solid #e8eaed; box-shadow:0 1px 4px rgba(0,0,0,0.05); overflow:hidden; }
    .panel-header { padding:18px 22px; border-bottom:1px solid #f0f0f0; display:flex; align-items:center; justify-content:space-between; background:#fafbff; }
    .panel-title { font-family:'Playfair Display',serif; font-size:1.05rem; font-weight:700; color:#0f1117; }
    .panel-live { font-size:0.7rem;font-weight:700;letter-spacing:0.07em;text-transform:uppercase;color:#166534;background:#dcfce7;border:1px solid #86efac;padding:4px 11px;border-radius:20px;display:flex;align-items:center;gap:6px; }
    .panel-live::before { content:'';width:6px;height:6px;border-radius:50%;background:#4ade80; }

    /* ═══ BLOOD AVAILABILITY GRID ═══ */
    .blood-avail-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:1px; background:#e8eaed; }
    .bav-cell { background:white; padding:18px 14px; display:flex; flex-direction:column; align-items:center; gap:4px; transition:background 0.15s; }
    .bav-cell:hover { background:#fff5f5; }
    .bav-type { font-family:'Playfair Display',serif; font-size:1.3rem; color:#b91c1c; line-height:1; }
    .bav-units { font-family:'Playfair Display',serif; font-size:1.4rem; font-weight:700; color:#0f1117; line-height:1; }
    .bav-label { font-size:0.67rem; color:#9ca3af; text-transform:uppercase; letter-spacing:0.06em; }
    .bav-bar { width:100%;height:4px;background:#f0f0f0;border-radius:3px;margin-top:8px;overflow:hidden; }
    .bav-fill { height:100%;border-radius:3px;background:#b91c1c;transition:width 0.6s ease; }

    /* ═══ QUICK ACTIONS ═══ */
    .quick-list { padding:10px; display:flex; flex-direction:column; gap:6px; }
    .quick-item { display:flex;align-items:center;gap:13px;padding:13px 14px;border-radius:10px;text-decoration:none;color:#0f1117;border:1px solid transparent;transition:all 0.15s; }
    .quick-item:hover { background:#fff5f5; border-color:#fecaca; }
    .qi-icon { width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0; }
    .qi-red    { background:#fef2f2; color:#b91c1c; }
    .qi-blue   { background:#eff6ff; color:#1d6fa4; }
    .qi-green  { background:#f0fdf4; color:#166534; }
    .qi-purple { background:#faf5ff; color:#7c3aed; }
    .qi-body { flex:1; }
    .qi-title { display:block;font-size:0.87rem;font-weight:600;color:#0f1117; }
    .qi-desc  { display:block;font-size:0.75rem;color:#9ca3af;margin-top:1px; }
    .qi-arrow { color:#d1d5db; }

    /* ═══ TABLE PAGES ═══ */
    .table-card { background:white;border-radius:14px;border:1px solid #e8eaed;box-shadow:0 1px 4px rgba(0,0,0,0.05);overflow:hidden; }
    .table-toolbar { padding:18px 22px;border-bottom:1px solid #f0f0f0;display:flex;align-items:center;gap:14px;flex-wrap:wrap;background:#fafbff; }
    .search-box { position:relative;flex:1;min-width:200px; }
    .search-box svg { position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9ca3af;pointer-events:none; }
    .search-input { width:100%;padding:10px 14px 10px 36px;border:1.5px solid #e8eaed;border-radius:10px;font-size:0.87rem;font-family:'DM Sans',sans-serif;background:white;color:#0f1117;transition:border-color 0.15s; }
    .search-input:focus { outline:none; border-color:#b91c1c; }
    .toolbar-right { display:flex;align-items:center;gap:10px;flex-wrap:wrap; }
    .chip-group { display:flex;gap:5px;flex-wrap:wrap; }
    .chip { padding:6px 13px;border-radius:20px;font-size:0.76rem;font-weight:600;background:white;color:#6b7280;border:1.5px solid #e8eaed;cursor:pointer;transition:all 0.15s;font-family:'DM Sans',sans-serif; }
    .chip:hover { border-color:#b91c1c;color:#b91c1c; }
    .chip.active { background:#b91c1c;color:white;border-color:#b91c1c; }
    .chip-green { color:#166534;border-color:#86efac; }
    .chip-amber { color:#92400e;border-color:#fcd34d; }
    .chip-red   { color:#b91c1c;border-color:#fca5a5; }
    .table-wrap { overflow-x:auto; }
    .data-table { width:100%;border-collapse:collapse;font-size:0.86rem; }
    .data-table thead { background:linear-gradient(135deg,#1a0000,#7f1d1d); }
    .data-table th { padding:13px 18px;text-align:left;font-size:0.71rem;font-weight:700;letter-spacing:0.08em;text-transform:uppercase;color:rgba(255,255,255,0.65);white-space:nowrap; }
    .data-table td { padding:14px 18px;border-bottom:1px solid #f5f5f5;color:#374151;vertical-align:middle; }
    .data-table tbody tr:hover { background:#fff5f5; }
    .data-table tbody tr:last-child td { border-bottom:none; }
    .table-footer { padding:13px 22px;border-top:1px solid #f0f0f0;background:#fafbff;display:flex;align-items:center;justify-content:space-between; }
    .table-count { font-size:0.79rem;color:#9ca3af; }
    .bt { display:inline-block;padding:3px 10px;border-radius:6px;font-size:0.78rem;font-weight:700;background:#fef2f2;color:#b91c1c;border:1px solid rgba(185,28,28,0.2);font-family:'Playfair Display',serif; }
    .badge { display:inline-flex;align-items:center;gap:5px;padding:4px 11px;border-radius:20px;font-size:0.73rem;font-weight:600;white-space:nowrap; }
    .badge::before { content:'';width:6px;height:6px;border-radius:50%;flex-shrink:0; }
    .badge-available { background:#dcfce7;color:#166534; } .badge-available::before { background:#166534; }
    .badge-expiring  { background:#fef9c3;color:#92400e; } .badge-expiring::before  { background:#f59e0b; }
    .badge-expired   { background:#fee2e2;color:#991b1b; } .badge-expired::before   { background:#b91c1c; }
    .empty-state { display:flex;flex-direction:column;align-items:center;gap:14px;padding:64px 24px;color:#9ca3af;text-align:center; }
    .empty-state a { color:#b91c1c;text-decoration:none;font-weight:600; }

    /* ═══ FORM PAGES ═══ */
    .page-layout { display:grid;grid-template-columns:1fr 300px;gap:24px;align-items:start; }
    .form-card { background:white;border-radius:16px;border:1px solid #e8eaed;box-shadow:0 2px 12px rgba(0,0,0,0.06);overflow:hidden; }
    .card-header { padding:24px 28px;border-bottom:1px solid #f0f0f0;display:flex;align-items:center;gap:16px;background:#fafbff; }
    .card-header-icon { width:50px;height:50px;background:#fef2f2;border-radius:13px;display:flex;align-items:center;justify-content:center;flex-shrink:0; }
    .card-header h2 { font-family:'Playfair Display',serif;font-size:1.2rem;color:#0f1117;margin-bottom:2px; }
    .card-header p { font-size:0.8rem;color:#9ca3af; }
    .form-body { padding:28px; }
    .form-section-title { font-size:0.73rem;font-weight:700;letter-spacing:0.12em;text-transform:uppercase;color:#b91c1c;margin-bottom:18px;padding-bottom:10px;border-bottom:2px solid #fef2f2; }
    .form-grid { display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-bottom:24px; }
    .form-group { display:flex;flex-direction:column;gap:6px; }
    .span-2 { grid-column:1/-1; }
    .form-label { font-size:0.82rem;font-weight:600;color:#374151; }
    .req { color:#b91c1c; }
    .form-control { padding:11px 15px;border:1.5px solid #e8eaed;border-radius:10px;font-size:0.9rem;font-family:'DM Sans',sans-serif;color:#0f1117;background:#fafbff;width:100%;transition:all 0.15s; }
    .form-control:focus { outline:none;border-color:#b91c1c;background:white;box-shadow:0 0 0 3px rgba(185,28,28,0.08); }
    .form-control::placeholder { color:#d1d5db; }
    .form-select { appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 13px center;cursor:pointer; }
    .form-textarea { resize:vertical;min-height:88px; }
    .form-hint { font-size:0.73rem;color:#9ca3af; }
    .form-footer { display:flex;gap:12px;justify-content:flex-end;padding-top:20px;border-top:1px solid #f0f0f0; }
    .info-stack { display:flex;flex-direction:column;gap:16px; }
    .info-card { background:white;border-radius:14px;border:1px solid #e8eaed;padding:20px;box-shadow:0 1px 4px rgba(0,0,0,0.05); }
    .info-card-red   { background:#fff5f5;border-color:rgba(185,28,28,0.18); }
    .info-card-amber { background:#fffbf0;border-color:rgba(245,158,11,0.25); }
    .info-card-dark  { background:linear-gradient(135deg,#1a0000,#7f1d1d);border-color:transparent; }
    .info-title { font-family:'Playfair Display',serif;font-size:0.95rem;font-weight:700;color:#0f1117;margin-bottom:12px; }
    .info-card-dark .info-title { color:white; }
    .info-list { list-style:none;display:flex;flex-direction:column;gap:7px; }
    .info-list li { font-size:0.81rem;color:#6b7280;padding-left:16px;position:relative;line-height:1.5; }
    .info-list li::before { content:'—';position:absolute;left:0;color:#b91c1c;font-size:0.75rem; }
    .info-note { font-size:0.81rem;color:#6b7280;line-height:1.6; }
    .blood-chips { display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px; }
    .bchip { padding:4px 11px;border-radius:6px;font-size:0.75rem;font-weight:700;background:white;color:#b91c1c;border:1px solid rgba(185,28,28,0.22); }
    .bchip-fill { background:#b91c1c;color:white;border-color:#b91c1c; }
    .alert-row { display:flex;align-items:center;gap:9px;padding:9px 13px;border-radius:8px;margin-bottom:7px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.14); }
    .alert-row:last-child { margin-bottom:0; }
    .alert-dot { width:7px;height:7px;border-radius:50%;background:#4ade80;flex-shrink:0; }
    .alert-row span { font-size:0.78rem;color:rgba(255,255,255,0.75); }

    /* ═══ DONOR CARDS (Donor List page) ═══ */
    .donor-card { background:white;border-radius:14px;border:1px solid #e8eaed;padding:24px;transition:all 0.2s ease;box-shadow:0 1px 4px rgba(0,0,0,0.05); }
    .donor-card:hover { transform:translateY(-3px);box-shadow:0 10px 28px rgba(0,0,0,0.1);border-color:rgba(185,28,28,0.25); }
    .donor-avatar { width:48px;height:48px;border-radius:50%;background:#fef2f2;color:#b91c1c;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1rem;flex-shrink:0; }
    .bt-badge { display:inline-flex;align-items:center;gap:5px;padding:5px 12px;background:#fef2f2;color:#b91c1c;border:1px solid rgba(185,28,28,0.2);border-radius:20px;font-family:'Playfair Display',serif;font-size:0.85rem;font-weight:700; }
    .donor-meta { display:flex;align-items:center;gap:7px;font-size:0.82rem;color:#6b7280;margin-bottom:7px; }
    .view-btn { padding:9px 20px;background:#b91c1c;color:white;border:none;border-radius:8px;font-size:0.82rem;font-weight:700;cursor:pointer;font-family:'DM Sans',sans-serif;transition:all 0.15s;text-decoration:none;display:inline-block; }
    .view-btn:hover { background:#991b1b;transform:translateY(-1px); }

    /* ═══ INVENTORY ═══ */
    .inv-stat { background:white;border-radius:14px;border:1px solid #e8eaed;padding:24px 28px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 1px 4px rgba(0,0,0,0.05); }
    .inv-stat-num { font-family:'Playfair Display',serif;font-size:2.2rem;font-weight:700;line-height:1; }
    .inv-stat-icon { width:52px;height:52px;border-radius:13px;display:flex;align-items:center;justify-content:center; }
    .blood-row { display:grid;grid-template-columns:80px 1fr 120px 120px 120px 100px;align-items:center;padding:18px 24px;border-bottom:1px solid #f5f5f5;transition:background 0.15s; }
    .blood-row:hover { background:#fff5f5; }
    .blood-row:last-child { border-bottom:none; }
    .blood-type-circle { width:44px;height:44px;border-radius:50%;background:#fef2f2;display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:0.95rem;font-weight:700;color:#b91c1c; }
    .stock-status { padding:5px 14px;border-radius:20px;font-size:0.76rem;font-weight:700;display:inline-block; }
    .s-good     { background:#dcfce7;color:#166534; }
    .s-moderate { background:#fef9c3;color:#92400e; }
    .s-low      { background:#fee2e2;color:#991b1b; }
    .s-critical { background:#fce7f3;color:#9d174d; }
    .upd-btn { color:#b91c1c;font-weight:700;font-size:0.82rem;background:none;border:none;cursor:pointer;font-family:'DM Sans',sans-serif;padding:6px 12px;border-radius:6px;transition:background 0.15s; }
    .upd-btn:hover { background:#fef2f2; }

    /* ═══ RESPONSIVE ═══ */
    @media(max-width:1100px) {
        .content-grid { grid-template-columns:1fr; }
        .stats-row { grid-template-columns:repeat(2,1fr); }
    }
    @media(max-width:900px) {
        .sidebar { width:68px; }
        .sidebar-logo-name,.sidebar-logo-sub,.nav-link>span:last-child,.status-text,.sidebar-copy { display:none; }
        .sidebar-header { justify-content:center;padding:16px 10px; }
        .nav-link { justify-content:center;padding:12px 8px; }
        .sidebar-footer { justify-content:center; }
        .main-wrap { margin-left:68px; }
        .page-layout { grid-template-columns:1fr; }
    }
    @media(max-width:640px) {
        .topbar-right { display:none; }
        .page-content { padding:16px; }
        .topbar { padding:14px 16px; }
        .stats-row { grid-template-columns:1fr 1fr; }
        .form-grid { grid-template-columns:1fr; }
    }
    </style>
</head>
<body>

<!-- ══════════ SIDEBAR ══════════ -->
<aside class="sidebar">
    <div class="sidebar-header">
        <div class="sidebar-logo-icon">
            <svg width="26" height="26" viewBox="0 0 32 32" fill="none">
                <path d="M16 2C16 2 6 12 6 19a10 10 0 0 0 20 0C26 12 16 2 16 2Z" fill="#b91c1c"/>
                <path d="M16 10C16 10 10 16.5 10 20.5a6 6 0 0 0 12 0C22 16.5 16 10 16 10Z" fill="white" opacity="0.35"/>
            </svg>
        </div>
        <div>
            <span class="sidebar-logo-name">BloodBank</span>
            <span class="sidebar-logo-sub">Management System</span>
        </div>
    </div>

    <nav class="sidebar-nav">
        <a href="/" class="nav-link">
            <span class="nav-icon">
                <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/>
                </svg>
            </span>
            <span>Dashboard</span>
        </a>
        <a href="/donors/register" class="nav-link">
            <span class="nav-icon">
                <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                    <line x1="12" y1="17" x2="12" y2="23"/>
                    <line x1="9" y1="20" x2="15" y2="20"/>
                </svg>
            </span>
            <span>Register Donor</span>
        </a>
        <a href="/donors" class="nav-link">
            <span class="nav-icon">
                <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
            </span>
            <span>Donor List</span>
        </a>
        <a href="/donations/record" class="nav-link">
            <span class="nav-icon">
                <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                </svg>
            </span>
            <span>Record Donation</span>
        </a>
        <a href="/inventory" class="nav-link">
            <span class="nav-icon">
                <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                </svg>
            </span>
            <span>Inventory</span>
        </a>
    </nav>

    <div class="sidebar-footer">
        <div class="sidebar-footer-row">
            <div class="status-dot"></div>
            <span class="status-text">System Online</span>
        </div>
        <div class="sidebar-copy">© 2026 BloodBank System<br>Saving Lives Together</div>
    </div>
</aside>

<!-- ══════════ MAIN ══════════ -->
<main class="main-wrap">
    <header class="topbar">
        <div>
            <h1 class="topbar-title">{% block page_title %}Dashboard{% endblock %}</h1>
            <p class="topbar-sub">{% block page_subtitle %}Blood Bank Management System{% endblock %}</p>
        </div>
        <div class="topbar-right">
            <div class="topbar-date">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2"/>
                    <line x1="16" y1="2" x2="16" y2="6"/>
                    <line x1="8" y1="2" x2="8" y2="6"/>
                    <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                <span id="topDate"></span>
            </div>
            <div class="topbar-hospital">City General Hospital</div>
        </div>
    </header>

    <div class="page-content">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash flash-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        {% block content %}{% endblock %}
    </div>
</main>

<script>
    document.getElementById('topDate').textContent = new Date().toLocaleDateString('en-US',{weekday:'short',month:'short',day:'numeric',year:'numeric'});
    const p = window.location.pathname;
    document.querySelectorAll('.nav-link').forEach(a => {
        const h = a.getAttribute('href');
        if (h === p || (h !== '/' && p.startsWith(h))) a.classList.add('active');
    });
</script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>